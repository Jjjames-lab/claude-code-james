# 📸 小红书图片提取测试说明

## ✅ 需求1已完成：点击跳转功能

HTML已更新，现在每个卡片有两个按钮：
- **🔗 打开笔记** - 点击会弹出提示，确认后跳转到小红书笔记
- **📋 复制标题** - 复制笔记标题到剪贴板

---

## 🧪 需求2测试：图片提取

### 测试目标
验证是否可以从小红书笔记页面提取首图并下载到本地

### 测试方法

我创建了两个测试脚本：

#### 方法1：手动测试（推荐先试这个）
```bash
./test_image_extraction.sh
```

这个脚本会：
1. 生成测试链接列表（5个笔记）
2. 生成JavaScript代码
3. 提示你手动在Chrome中测试

**步骤**：
1. 运行脚本：`./test_image_extraction.sh`
2. 在Chrome中打开第一个测试链接
3. 按F12打开开发者工具
4. 在Console中复制粘贴`extract_images.js`的内容
5. 查看输出的图片URL
6. 检查是否可以直接下载

#### 方法2：自动测试（如果你已完成方法1）
```bash
python3 test_extract_images.py
```

这个脚本会：
1. 自动打开Chrome浏览器
2. 访问5个测试笔记
3. 提取图片URL
4. 尝试下载封面图片
5. 生成测试报告

---

## 📋 测试检查清单

请检查以下要点：

### ✅ 图片URL格式
- [ ] 是正常的`https://sns-webpic.xhscdn.com/...`格式
- [ ] 不是blob://或data:image格式
- [ ] URL长度合理（通常200-500字符）

### ✅ 图片识别
- [ ] 能正确识别首图（第一张图片）
- [ ] 能排除用户头像
- [ ] 能排除图标等小图
- [ ] 图片尺寸合理（>300x300）

### ✅ 下载测试
- [ ] curl可以成功下载
- [ ] 下载的文件大小合理（>10KB）
- [ ] 文件格式正确（JPG/WebP）
- [ ] 图片内容清晰

### ✅ 性能测试
- [ ] 每个笔记加载时间<5秒
- [ ] 不触发反爬虫限制
- [ ] 连续访问多个笔记正常

---

## 🎯 判断标准

### ✅ 可以批量提取（满足3个以上条件）
- 图片URL格式正常且可直接访问
- 能正确识别首图
- 下载成功率>60%
- 不触发反爬虫限制

### ⚠️ 需要优化（满足1-2个条件）
- 部分笔记可以提取
- 需要改进识别逻辑
- 需要处理特殊格式

### ❌ 不建议批量提取（都不满足）
- 图片是blob格式
- 需要逆向API
- 触发反爬虫限制

---

## 📊 测试结果示例

成功的结果应该是：
```json
{
  "success": true,
  "total": 5,
  "images": [
    {
      "index": 1,
      "url": "https://sns-webpic.xhscdn.com/...",
      "width": 1080,
      "height": 1440,
      "isCover": true
    }
  ]
}
```

---

## 🚀 下一步

根据测试结果决定：

1. **如果测试成功**：
   - 编写批量提取脚本
   - 处理120个笔记
   - 下载所有图片到 `/images/` 文件夹
   - 更新HTML引用本地图片

2. **如果测试失败**：
   - 使用渐变色作为封面（当前方案）
   - 或使用免费图库的相关图片
   - 或使用emoji大图标

---

**准备好了吗？请先运行 `./test_image_extraction.sh` 开始手动测试！**
