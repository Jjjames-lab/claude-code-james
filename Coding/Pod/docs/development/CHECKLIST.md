# 开发检查清单 - Development Checklist

> **使用说明**: 每次开发前，必须逐项检查。全部通过✅后，才能开始写代码。

---

## 🚀 项目启动检查清单（最重要！）

**每次打开项目开始工作前，必须执行以下步骤：**

### 📖 第一次参与本项目？
**必须按顺序阅读以下文档**（约 15 分钟）：

- [ ] **1. 产品文档索引**（5 分钟）
  ```bash
  open docs/product/产品文档_README.md
  ```
  了解文档结构、版本管理、更新机制

- [ ] **2. 产品变更日志**（3 分钟）
  ```bash
  open docs/product/CHANGELOG.md
  ```
  了解历史版本和最新变更

- [ ] **3. 产品需求总览**（7 分钟）
  ```bash
  open docs/product/产品需求文档_总览.md
  ```
  理解完整产品愿景、功能、架构

- [ ] **4. 确认当前版本**
  ```bash
  # 查看 CHANGELOG.md 第一行
  # 例如：## [v2.1.0] - 2026-01-29
  ```
  确认当前产品版本，了解最新功能

### 🔄 后续每次打开项目？
**快速检查**（约 3 分钟）：

- [ ] **1. 查看最新变更**
  ```bash
  # 查看 CHANGELOG.md 最新版本
  # 了解是否有新增功能或设计变更
  ```

- [ ] **2. 确认任务列表**
  ```bash
  # 使用 Claude Code 的 /tasks 命令
  # 查看待完成任务
  ```

- [ ] **3. 阅读相关功能文档**
  ```bash
  # 如果开发新功能，阅读对应的功能需求文档
  # 例如：docs/product/功能需求/播客列表功能需求.md
  ```

### ✅ 确认完成
**大声说出**（或默念）：
> "我已完成项目启动检查，了解当前产品状态和最新变更，现在开始工作！"

---

## ⚠️ 重要提醒

### 文档更新要求
**以下情况必须更新产品文档**：
- ✅ 新增功能需求
- ✅ 设计变更（UI/UX）
- ✅ 交互流程修改
- ✅ 技术方案调整
- ✅ Bug 修复（影响用户体验）

**更新流程**：
1. 修改具体的功能需求文档
2. 更新 `CHANGELOG.md`（记录变更）
3. 更新 `产品文档_README.md`（如果需要）
4. Git commit 格式：`docs: 更新 xxx 功能需求（v2.1.0）`

### 文档目录结构
```
docs/product/
├── 产品文档_README.md          # 文档索引（必读！）
├── CHANGELOG.md                # 变更日志（必读！）
├── 产品需求文档_总览.md        # 完整产品理解（必读！）
├── 功能需求/
│   ├── 播客列表功能需求.md
│   └── [其他功能...]
└── 设计规范/
    ├── UI设计规范.md
    ├── 交互设计规范.md
    └── 路由设计规范.md
```

---

## 🔍 第三方API集成检查清单

开发任何需要调用第三方API的功能前，必须检查：

- [ ] **是否已索要官方资料？**
  - [ ] 官方demo代码
  - [ ] 官方API文档
  - [ ] SDK或客户端库

- [ ] **资料是否来自官方渠道？**
  - [ ] 官方网站
  - [ ] 官方GitHub仓库
  - [ ] 官方SDK文档

- [ ] **是否已向用户确认方案？**
  - [ ] 说明API来源
  - [ ] 说明实施方法
  - [ ] 用户已批准

**❌ 禁止行为**:
- 不索要官方资料，自己搜索文档
- 使用非官方、过时的文档
- 不向用户确认直接实施

---

## 🔗 前后端接口开发检查清单

开发需要前后端交互的功能前，必须检查：

- [ ] **是否先定义了TypeScript类型？**
  - [ ] 在 `types.ts` 中定义接口
  - [ ] 包含所有字段名
  - [ ] 标注字段类型
  - [ ] 标注可选字段

- [ ] **后端是否遵循类型定义？**
  - [ ] Pydantic模型与TS类型一致
  - [ ] 字段名完全匹配
  - [ ] 返回格式符合契约

- [ ] **是否已测试接口？**
  - [ ] 打印实际返回数据
  - [ ] 对比类型定义
  - [ ] 确认完全匹配

**❌ 禁止行为**:
- 先写后端，后写前端
- 后端返回随意格式
- 前端"猜测"返回格式

**✅ 正确流程**:
```
1. types.ts 定义接口
2. 后端按接口实现
3. 前端直接使用类型
4. 测试验证
```

---

## 🏗️ 数据架构设计检查清单

处理复杂格式数据时，必须检查：

- [ ] **数据应该在哪里处理？**
  - [ ] 后端: 数据转换
  - [ ] 前端: UI渲染

- [ ] **后端是否返回可用的数据？**
  - [ ] 结构化JSON
  - [ ] 不是原始HTML
  - [ ] 不是未解析的字符串

- [ ] **前端是否只负责渲染？**
  - [ ] 不解析HTML
  - [ ] 不转换数据格式
  - [ ] 只做UI逻辑

**❌ 禁止行为**:
- 后端返回原始HTML字符串
- 前端直接显示HTML源码
- 让前端解析复杂格式

**✅ 正确架构**:
```
后端: 原始数据 → 解析 → 结构化JSON
前端: 接收JSON → 组件渲染
```

---

## 📦 状态管理设计检查清单

设计组件状态时，必须问自己3个问题：

- [ ] **Q1: 这个数据会被多个组件共享吗？**
  - YES → 父组件状态或Store
  - NO → 组件内部状态

- [ ] **Q2: 这个数据需要在组件卸载后保留吗？**
  - YES → 父组件状态或Store
  - NO → 组件内部状态

- [ ] **Q3: 这个数据是全局唯一的吗？**
  - YES → Zustand Store
  - NO → 父组件或组件内

**验证方法**:
- [ ] 切换Tab/页面 → 数据是否丢失？
- [ ] 如果丢失 → 状态提升

**❌ 禁止行为**:
- 让子组件管理共享数据
- 让Tab页面组件管理持久化数据

**✅ 正确示例**:
```typescript
// ❌ 错误：子组件管理状态
const ChaptersSection = () => {
  const [chapters, setChapters] = useState(null);
  // 切换Tab后数据丢失
}

// ✅ 正确：父组件管理状态
const HomePage = () => {
  const [chapters, setChapters] = useState(null);
  return <ChaptersSection chapters={chapters} setChapters={setChapters} />;
}
```

---

## 🎨 UI设计检查清单

开发任何UI组件前，必须检查：

- [ ] **是否遵循设计系统？**
  - [ ] 使用设计token（颜色、字体、间距）
  - [ ] 使用设计组件（.btn, .input, .card）
  - [ ] 符合设计规范

- [ ] **是否考虑了响应式？**
  - [ ] 移动端布局
  - [ ] 最大宽度限制
  - [ ] 触摸友好

- [ ] **是否考虑了可访问性？**
  - [ ] 语义化HTML
  - [ ] 键盘导航支持
  - [ ] 焦点状态清晰

- [ ] **是否考虑了加载状态？**
  - [ ] 骨架屏或spinner
  - [ ] 错误状态
  - [ ] 空状态

**❌ 禁止行为**:
- 使用硬编码的颜色值
- 忽略响应式
- 忘记loading/error/empty状态

---

## 🚀 功能开发检查清单

开发新功能前，必须检查：

- [ ] **需求是否清晰？**
  - [ ] 明确用户场景
  - [ ] 明确输入输出
  - [ ] 已与用户确认

- [ ] **是否考虑了边界情况？**
  - [ ] 空数据
  - [ ] 错误数据
  - [ ] 网络异常
  - [ ] 性能极限

- [ ] **是否考虑了性能？**
  - [ ] 大数据量处理
  - [ ] 避免不必要的重渲染
  - [ ] 图片懒加载

- [ ] **是否可测试？**
  - [ ] 手动测试步骤
  - [ ] 测试用例覆盖

---

## 📋 日常开发标准流程

每次开发任何功能，严格执行以下流程：

### Step 1: 需求理解（5分钟）
- [ ] 阅读用户需求
- [ ] 不理解的地方立即提问
- [ ] 复述确认理解

### Step 2: 方案设计（10分钟）
- [ ] 思考技术方案
- [ ] 画出架构草图
- [ ] 考虑边界情况
- [ ] 向用户展示方案
- [ ] 获得用户批准

### Step 3: 接口定义（5分钟）
- [ ] 在types.ts定义接口
- [ ] 前后端对齐
- [ ] 确认字段名一致

### Step 4: 开发实施（按需）
- [ ] 后端开发
- [ ] 前端开发
- [ ] 遵循设计系统

### Step 5: 测试验证（10分钟）
- [ ] 手动测试
- [ ] 边界测试
- [ ] 错误测试
- [ ] 性能测试

### Step 6: 代码提交
- [ ] 代码review
- [ ] 添加注释
- [ ] 提交commit

---

## 🎯 今日特别提醒

根据昨日工作日志，特别注意以下问题：

1. **ASR集成**: 先索要官方demo和文档！
2. **接口定义**: 先写TypeScript类型！
3. **数据分层**: 后端解析，前端渲染！
4. **状态管理**: 共享数据提升到父组件！

---

## 📊 检查清单使用统计

- **创建日期**: 2026-01-27
- **适用项目**: 小宇宙深度学习助手
- **使用频率**: 每次开发前必查
- **更新周期**: 每周更新一次

---

**记住**: 花时间检查，节省时间返工！

**每次开发前大声说出**:
"让我先检查清单，确保不再犯昨天的错误！"
