import{r as c,j as o,c as d,aM as y,aN as O,aO as M,aP as A,aQ as B,aR as R,aK as V,aS as Q,aT as z,I,aU as K,aV as L,aW as U,B as C}from"./main-BC3yBi8Q.js";const w=({open:e,setOpen:n,onClose:s,children:t,title:a,description:r,className:i})=>{const[u,l]=c.useState(e||!1);return y(()=>{n?.(u)},[u]),y(()=>{l(e||!1)},[e]),o.jsx(O,{open:u,onOpenChange:l,onClose:s,noBodyStyles:!0,modal:!0,children:o.jsxs(M,{className:d("pt-4 pb-safe-or-4 bg-neutral-700/50 border border-b-0 border-foreground/10 backdrop-blur-2xl backdrop-saturate-200 max-h-full outline-none sm:mx-2 md:mx-auto md:max-w-3xl",i),children:[o.jsxs(A,{className:d("sm:text-center",!a&&"hidden"),children:[o.jsx(B,{children:a}),r&&o.jsx(R,{children:r})]}),o.jsxs("div",{className:"px-4 pt-4",children:[" ",t]})]})})};V.memo(w);const F=(e,n)=>{const{title:s,description:t,actions:a}=e,[r,i]=c.useState(!1),[u,l]=c.useState(r),b=c.useCallback(()=>{setTimeout(()=>{l(!1)},500)},[]);c.useEffect(()=>{r&&l(!0)},[r]);const[g,S]=c.useState(),k=c.useMemo(()=>u?o.jsx(w,{open:r,setOpen:i,onClose:b,title:s,description:t,children:o.jsx("div",{className:"space-y-3",children:a?.map(({label:f,action:h,variant:v,render:p,noStyle:x,visible:T=!0},E)=>T&&o.jsx("div",{className:x?void 0:d("h-12 max-sm:justify-center bg-foreground/5 border border-foreground/5 hover-active:bg-foreground/10 hover-hover:active:bg-foreground/5 rounded-full px-4 flex items-center transition",v==="destructive"&&"bg-destructive hover-active:hover:bg-destructive/80",g?.buttonClassName),onClick:async W=>{try{h&&(await h(),i(!1))}catch{}},children:p?p():f},E))})}):null,[r,a,b,u,s,t,g,n]),D=c.useCallback(f=>(f&&setTimeout(()=>{c.startTransition(()=>{S(h=>Object.entries(f).some(([p,x])=>x!==h?.[p])?f:h)})}),k),[k]),N=c.useCallback(()=>{i(!0)},[]);return{open:r,setOpen:i,openActionSheet:N,renderActionSheet:D}};var m=(e=>(e[e.processingDone=2]="processingDone",e[e.newEpisode=4]="newEpisode",e[e.weeklySuggestion=8]="weeklySuggestion",e))(m||{});const q={processingDone:!0,newEpisode:!0,weeklySuggestion:!0},j=H(q);function H(e){let n=0;for(const s in e)e[s]&&(n|=m[s]);return n}function G(e){const n=P(e),s={};for(const t in m)isNaN(Number(t))&&(s[t]=!1);for(const t in m)if(isNaN(Number(t))){const a=m[t];(n&a)!==0&&(s[t]=!0)}return s}function P(e){if(e==null)return j;const n=14,s=e&n,t=~n;return s|j&t}const J=({children:e,className:n,contentClassName:s})=>{const[t,a]=c.useState(!1);return o.jsxs(Q,{delayDuration:0,open:t,children:[o.jsx(z,{asChild:!0,children:o.jsx("button",{type:"button",className:d("cursor-pointer",n),onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),onTouchStart:()=>a(!t),onKeyDown:r=>{r.preventDefault(),r.key==="Enter"&&a(!t)},children:o.jsx(I.question,{className:d("size-4 opacity-50",n)})})}),o.jsx(K,{className:d("max-w-[300px] text-sm bg-foreground/10 px-4 py-3 text-foreground backdrop-blur-3xl z-999",s),children:e})]})},X=({provider:e,label:n})=>{const{connect:s,disconnect:t,isConnected:a,isLoading:r}=L(e),i=c.useCallback(async()=>{await U({title:"Disconnect",description:`Confirm to disconnect your account from ${e}`})&&t()},[t]),u=c.useCallback(async()=>{s()},[s]);return a?o.jsxs(C,{loading:r,variant:"destructive",onClick:i,className:"rounded-full h-8",children:["Disconnect ",n||e]}):o.jsxs(C,{loading:r,className:"rounded-full h-8",onClick:u,children:["Connect ",n||e]})};export{X as O,J as Q,G as d,H as e,F as u};
