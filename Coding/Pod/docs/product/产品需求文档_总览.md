# Bookshelf Sounds 产品需求文档（总览）

**版本**: v2.1.0
**最后更新**: 2026-01-29
**产品状态**: 🟢 活跃开发中

---

## 📋 目录

1. [产品概述](#产品概述)
2. [核心功能](#核心功能)
3. [用户流程](#用户流程)
4. [设计原则](#设计原则)
5. [技术架构](#技术架构)
6. [功能优先级](#功能优先级)
7. [详细需求索引](#详细需求索引)

---

## 产品概述

### 产品愿景
> 我们不追求去抢夺任何人的注意力，而更愿意保护你的注意力，能放到你感兴趣的地方。这里是一个可以帮助你更好使用播客的地方，帮助你记录你的笔记、理解播客内容、发散你的好奇心。这里是像星际穿越中的男主女儿会在的书柜旁，很安心，虽然没有人在旁边，但是书柜里其实是有个爱你的人在陪伴着你啊。

### 产品定位
**对标产品**: Scripod
**核心价值**: 深度学习 + 宁静陪伴
**目标用户**: 播客重度用户、学习者、知识工作者

### 核心价值主张
1. **精准转录**: ASR 引擎 + AI 优化，词级时间戳
2. **智能分章**: 自动生成章节结构，快速定位
3. **深度笔记**: 记录想法，时间戳跳转
4. **宁静体验**: 克制设计，温暖陪伴

---

## 核心功能

### ✅ 已实现功能（v2.0.0）

#### 1. 链接输入与解析
- 支持小宇宙单集链接
- 自动提取音频和元数据
- 错误处理和重试机制

#### 2. 语音转录
- ASR 引擎：豆包/千问
- 词级时间戳
- 句子级分段
- 支持长音频（3小时+）

#### 3. AI 优化
- LLM 自动添加标点
- 合并短段落
- 提升可读性
- 原始/优化模式切换

#### 4. 智能分章
- 自动生成章节结构
- 识别话题切换
- 快速跳转播放

#### 5. 多模态展示
- 概览：播客信息 + 统计
- 逐字稿：词级/句级切换
- 章节：自动生成 + 可编辑
- 节目单：完整保留格式

#### 6. 数据持久化
- LocalStorage 存储
- 播放位置记忆
- 历史记录
- 自动保存

#### 7. 设计系统 v3.0
- 深邃有机设计
- 玻璃态卡片
- 微动效交互
- 响应式布局

---

### 🚧 开发中功能（v2.1.0）

#### 播客列表功能
**详细文档**: [功能需求/播客列表功能需求.md](./功能需求/播客列表功能需求.md)

**核心能力**：
- 支持播客主页链接解析
- 显示最新 5 期节目清单
- 智能数据复用（避免重复转录）
- React Router 路由系统

**用户价值**：
- 快速浏览播客内容
- 批量管理节目
- 节省转录时间

---

### 📋 计划中功能（v2.2.0+）

#### 1. 笔记系统
- 选中文字添加笔记
- 时间戳跳转
- 笔记分类（想法/问题/行动）
- 导出笔记

#### 2. 书签功能
- 标记音频片段
- 进度条显示
- 书签列表
- 一键跳转

#### 3. Highlights 自动提取
- AI 识别金句
- 高亮显示
- 一键复制
- 分享功能

#### 4. 全文搜索
- 搜索逐字稿
- 高亮匹配
- 上下文显示
- 快捷键（Cmd+K）

#### 5. 导出功能
- Markdown 导出
- PDF 导出
- 纯文本导出
- 包含时间戳/笔记

---

## 用户流程

### 主要使用场景

#### 场景 1：快速转录单集
```
1. 复制小宇宙链接
2. 粘贴到输入框
3. 点击"发送"
4. 等待转录完成（2-5 分钟）
5. 开始学习（逐字稿/章节/笔记）
```

#### 场景 2：浏览播客清单
```
1. 粘贴播客主页链接
2. 查看播客信息
3. 浏览最新 5 期节目
4. 选择感兴趣的单集
5. 点击进入学习
```

#### 场景 3：智能数据复用
```
1. 浏览播客节目清单
2. 查看处理状态
3. 已处理：直接加载（省时）
4. 未处理：点击"Run AI Processing"
5. 完成后自动保存
```

#### 场景 4：深度学习
```
1. 播放音频
2. 查看逐字稿（同步滚动）
3. 遇到金句：添加书签
4. 有想法：记录笔记
5. 回顾章节：快速跳转
```

---

## 设计原则

### 1. 产品愿景
**"慢下来，深思考"**

- 克制：不抢夺注意力
- 温暖：陪伴而非工具
- 宁静：减少视觉噪音
- 尊重：保护用户专注

### 2. 设计哲学
**"书柜旁的陪伴"**

- 像星际穿越中的书柜
- 虽然没有人
- 但有个爱你的人在陪伴
- 安心、温暖、有力量

### 3. 交互原则
- **简洁**: 每个页面只有一个核心操作
- **直观**: 不需要说明书也能使用
- **流畅**: 动画自然，响应迅速
- **容错**: 温和的错误提示

### 4. 视觉风格（设计系统 v3.0）
- 深邃背景（黑色为主）
- 有机渐变（拒绝紫色陈词滥调）
- 玻璃态卡片（毛玻璃效果）
- 噪点纹理（质感提升）
- 微动效（细腻交互）

---

## 技术架构

### 前端技术栈
```
React 19 + TypeScript + Vite
├── 状态管理: Zustand
├── 路由: React Router v6
├── 样式: Tailwind CSS + 自定义设计系统
├── 图标: Lucide React
└── 存储: LocalStorage
```

### 后端技术栈
```
FastAPI (Python 3.10+)
├── ASR: 豆包 / 千问
├── AI: 智谱 GLM-4
├── 爬虫: Playwright
└── 存储: MinIO（对象存储）
```

### 数据架构
```
前端存储（LocalStorage）
├── 播放位置
├── 历史记录
├── 已处理单集标记
└── 完整单集数据（转录/章节/笔记）

后端 API
├── /episode/parse - 解析单集链接
├── /podcast/parse - 解析播客主页
├── /asr/transcribe - ASR 转录
└── /llm/polish - LLM 优化
```

### 路由结构
```
/                    → 输入页面（首页）
/podcast/:id         → 播客详情页
/episode/:id         → Tab 功能页
  ├── Overview       → 概览
  ├── TRANSCRIPT     → 逐字稿
  ├── CHAPTERS       → 章节
  └── NOTE           → 笔记（计划中）
```

---

## 功能优先级

### P0：核心功能（已完成 ✅）
- [x] 链接输入与解析
- [x] ASR 转录
- [x] AI 优化
- [x] 智能分章
- [x] 左侧 Tab 导航
- [x] LocalStorage 持久化

### P1：高优先级（开发中 🚧）
- [ ] 播客列表功能
- [ ] 智能数据复用
- [ ] React Router 路由
- [ ] 笔记系统
- [ ] 书签功能

### P2：中优先级（计划中 📋）
- [ ] Highlights 自动提取
- [ ] 全文搜索
- [ ] 导出功能
- [ ] 键盘快捷键
- [ ] 性能优化（虚拟列表）

### P3：低优先级（未来考虑 💭）
- [ ] 移动端适配
- [ ] 主题切换
- [ ] PWA 支持
- [ ] 多语言支持
- [ ] 用户账户系统

---

## 详细需求索引

### 功能需求文档
- 📄 [播客列表功能需求.md](./功能需求/播客列表功能需求.md) - v2.1.0
- 📄 [转录功能需求.md](./功能需求/转录功能需求.md) - v1.0.0
- 📄 [笔记功能需求.md](./功能需求/笔记功能需求.md) - 计划中

### 设计规范文档
- 📄 [UI设计规范.md](./设计规范/UI设计规范.md) - v3.0
- 📄 [交互设计规范.md](./设计规范/交互设计规范.md) - v3.0
- 📄 [路由设计规范.md](./设计规范/路由设计规范.md) - v2.1.0

### 技术文档
- 📄 [技术现状文档](../development/TECHNICAL_STATUS.md) - ⚠️ **开发前必读**
- 📄 [项目工作历史](../development/PROJECT_WORK_HISTORY.md) - 问题与解决方案
- 📄 [前端架构文档](../technical/前端架构文档.md)
- 📄 [API 接口文档](../technical/API接口文档.md)
- 📄 [数据库设计文档](../technical/数据库设计文档.md)

---

## ⚠️ 开发前必读

### 避免重复造轮子
在开始任何开发任务前，**必须**先查阅：

1. **技术现状文档** (`docs/development/TECHNICAL_STATUS.md`)
   - ✅ 完整的前端组件清单（含 Props 和功能说明）
   - ✅ 完整的 API 服务清单（含请求/响应格式）
   - ✅ 已完成功能列表
   - ✅ 当前待办事项（正确版本）

2. **项目工作历史** (`docs/development/PROJECT_WORK_HISTORY.md`)
   - ✅ 历史问题与解决方案
   - ✅ 常见错误排查
   - ✅ 开发指南

### 检查清单
在创建新组件或功能前，先执行：
```bash
# 检查组件是否存在
Glob pattern="**/components/**/*.tsx"

# 搜索相关功能
Grep pattern="关键词" output_mode="files_with_matches"
```

### 已有核心组件
- ✅ `TranscriptViewer` - 逐字稿查看器（支持高亮、跳转、笔记）
- ✅ `ChaptersSectionEnhanced` - 章节展示和生成（内置 LLM 调用）
- ✅ `OverviewSection` - 概览组件（对标 Scripod）
- ✅ `AudioPlayerEnhanced` - 音频播放器
- ✅ `NoteList` / `NoteInputModal` - 笔记组件
- ✅ `PodcastCard` / `EpisodeListItem` - 播客卡片

### 已有 API 函数
- ✅ `startTranscription()` - ASR 转录（返回 words + utterances）
- ✅ `parseEpisode()` - 解析单集链接
- ✅ `parsePodcast()` - 解析播客主页
- ✅ `polishTranscript()` - LLM 优化（ASR 已返回标点，可能不需要）
- ⚠️ `generateChapters()` - 需要封装到 api.ts

### 参考图
- 🖼️ [场景 1：单集链接界面](./参考图/场景\ 1：用户输入单集节目链接跳转后界面.png)
- 🖼️ [场景 2：播客主页界面](./参考图/场景\ 2：播客主页界面.png)

---

## 附录

### 对标产品分析
**Scripod**：
- ✅ 优点：播客列表、笔记系统、界面简洁
- ❌ 缺点：不支持中文播客、价格昂贵
- 🎯 我们的优势：小宇宙集成、更懂中国用户、免费

### 竞争差异化
1. **专注中文播客**: 深度集成小宇宙
2. **极致体验**: 设计系统 v3.0
3. **智能复用**: 避免重复转录
4. **宁静陪伴**: 不是工具，是陪伴

### 成功指标
- 用户留存率 > 60%（月活）
- 平均使用时长 > 30 分钟/次
- 转录成功率 > 95%
- 用户满意度 > 4.5/5.0

---

**最后更新**: 2026-01-29
**下次回顾**: 2026-02-01
**维护者**: James & Claude Code
